## Описание проекта:

* Проект YaMDb собирает отзывы (Review) пользователей на произведения (Titles). Произведения делятся на категории: «Книги», «Фильмы», «Музыка». Список категорий (Category) может быть расширен администратором.
* В каждой категории есть произведения: книги, фильмы или музыка. 
* Произведению может быть присвоен жанр (Genre) из списка предустановленных (например, «Сказка», «Рок» или «Артхаус»). Новые жанры может создавать только администратор.
* Благодарные или возмущённые пользователи оставляют к произведениям текстовые отзывы (Review) и ставят произведению оценку в диапазоне от одного до десяти (целое число); из пользовательских оценок формируется усреднённая оценка произведения (рейтинг). На одно произведение пользователь может оставить только один отзыв.

Полный список возможных запросов и соответствующих ответов можно найти в документации по следующей ссылке: 
 
[http://127.0.0.1:8000/redoc/](http://127.0.0.1:8000/redoc/) 
 
### Ссылка заработает только после запуска проекта, о чем речь пойдет ниже. 
 
## Как запустить проект: 
 
Клонируйте репозиторий и перейдите в него в командной строке: 
 
``` 
git clone git@github.com:Nasibao/api_yamdb.git
``` 
 
``` 
cd api_yamdb 
``` 
 
Cоздайте и активируйте виртуальное окружение: 
 
``` 
python -m venv venv 
``` 
 
``` 
source venv/Scripts/activate 
``` 
 
Установите зависимости из файла *requirements.txt*: 
 
``` 
python -m pip install --upgrade pip 
``` 
 
``` 
pip install -r requirements.txt 
``` 
 
Перейдите в папку *api_yamdb *: 
 
``` 
cd api_yamdb  
``` 
 
Выполните миграции: 
 
``` 
python manage.py migrate 
``` 
 
Запустите проект: 
 
``` 
python manage.py runserver 
``` 

### Регистрация нового пользователя 
Для регистрации нового пользователя необходимо выполнить запрос:
``` 
POST /api/v1/auth/signup/ 
{ 
    "email": "example@example.com"
    "username": "my_username", 
} 
``` 
На указанную почту придет код подтверждения, который нужно будет использовать для получения JWT (см. следующий шаг).

### Аутентификация 
Аутентификация на ресурсе происходит посредством JWT. Для его получения необходимо выполнить запрос: 
``` 
POST /api/v1/auth/token/  
{ 
    "username": "my_username", 
    "confirmation_code": "my_confirmation_code"" 
} 
``` 
В поле "confirmation_code" нужно передать, код полученный при регистрации пользователя (см. предыдущий шаг)

Ответ будет выглядеть примерно так: 
``` 
{ 
  "token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0b2tlbl90eXBlIjoicmVmcmVzaCIsImV4cCI6MTYzMjE1OTU2OSwianRpIjoiNWZlNjUxNjEyMDFmNDIwYjg3Y2YxMTIwYjliNzNkMzUiLCJ1c2VyX2lkIjoxfQ.Ugsfl2RUAsIYSnErd4ubDaOLhmCm3yQ3paik90OvQFI"
} 
``` 
Все последующие запросы к ресурсу, требующие аутентификации, отправлять с заголовком 
``` 
Authorization: Bearer token
``` 

### Пример запроса к API 

Добавить новый отзыв "Текст отзыва" к произведению с id = 1, проставить произведению оценку 7 из 10:
``` 
POST /api/v1/titles/1/reviews/

Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ0b2tlbl90eXBlIjoicmVmcmVzaCIsImV4cCI6MTYzMjE1OTU2OSwianRpIjoiNWZlNjUxNjEyMDFmNDIwYjg3Y2YxMTIwYjliNzNkMzUiLCJ1c2VyX2lkIjoxfQ.Ugsfl2RUAsIYSnErd4ubDaOLhmCm3yQ3paik90OvQFI

{ 
    "text": "Текст отзыва", 
    "score":  7
} 
``` 

### О программе закрузки CSV файлов

При загрузке CSV файлов в базу даннных приложения, убедитесь, что названия файлов
соответствуют названию моделей приложения. В качестве пробелов между словами, в
названиях файлов, используйте "_". Можете использовать в названиях как заглавные,
так и прописные буквы. Так же убедитесь, что имена колонок в CSV файлах, которые
явлются ForeignKey, названы по принципу <имя_поля_id> (пример genre_id).
Все CSV файлы желательно закружать в директорию: static/data.

### Работа с загрузчиком CSV файлов

- В папке с файлом manage.py выполните команду:

```sh
python3 manage.py load-csv static/data

```
